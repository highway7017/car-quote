<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>비대면 차량 견적 상담</title>

<style>
:root{
  --bg-img: url("bg.png");
  --pink1:#ff9acb;
  --pink2:#ff5fb3;
  --ink:#2a1f2d;
}

/* =======================
   전체 배경
======================= */
html,body{
  margin:0;
  padding:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Noto Sans KR", sans-serif;
  background:#fff;
}

/* BG 이미지 */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background-image:var(--bg-img);
  background-size:cover;
  background-position:center;
  opacity:.45;
  z-index:-2;
}

/* 핑크 그라데이션 오버레이 */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background:
    linear-gradient(
      to bottom,
      rgba(255,255,255,.25) 0%,
      rgba(255,180,220,.55) 55%,
      rgba(255,90,180,.75) 100%
    );
  z-index:-1;
}

/* =======================
   레이아웃
======================= */
.wrapper{
  max-width:1000px;
  margin:40px auto 80px;
  padding:0 16px;
}

.card{
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(10px);
  border-radius:24px;
  padding:24px;
  box-shadow:0 20px 50px rgba(0,0,0,.15);
}

h1{
  margin:0;
  text-align:center;
  font-size:26px;
}
.sub{
  text-align:center;
  margin:8px 0 24px;
  font-weight:600;
  opacity:.7;
}

.section{
  margin-top:24px;
}
.section h2{
  font-size:18px;
  margin-bottom:12px;
}

label{
  display:block;
  margin-top:12px;
  font-weight:700;
}
input, select{
  width:100%;
  padding:12px 14px;
  margin-top:6px;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:15px;
}

.radio-group{
  display:flex;
  gap:12px;
  margin-top:8px;
}
.radio-group label{
  display:flex;
  align-items:center;
  gap:6px;
  font-weight:700;
}

#suggest{
  border:1px solid #ddd;
  border-radius:12px;
  margin-top:6px;
  background:#fff;
  display:none;
}
#suggest div{
  padding:10px 14px;
  cursor:pointer;
  font-weight:700;
}
#suggest div:hover{
  background:#ffe2f0;
}

.option{
  display:flex;
  align-items:center;
  gap:8px;
  margin-top:6px;
}

.prices{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:12px;
  margin-top:16px;
}
.price{
  background:#fff;
  border-radius:12px;
  padding:12px;
  text-align:center;
  font-weight:800;
}

button{
  width:100%;
  margin-top:24px;
  padding:16px;
  border:none;
  border-radius:999px;
  background:linear-gradient(90deg,var(--pink1),var(--pink2));
  color:#fff;
  font-size:16px;
  font-weight:900;
  cursor:pointer;
}

small{
  display:block;
  margin-top:6px;
  opacity:.6;
  font-weight:600;
}
</style>
</head>

<body>
<div class="wrapper">
  <div class="card">
    <h1>비대면 차량 견적 상담</h1>
    <div class="sub">간단한 조건 입력으로 비대면 안내드립니다</div>

    <!-- ================= 차량 선택 ================= -->
    <div class="section">
      <h2>차량 선택</h2>

      <label>상담 유형</label>
      <div class="radio-group">
        <label><input type="radio" name="dealType" value="렌트" checked> 장기렌트</label>
        <label><input type="radio" name="dealType" value="리스"> 리스</label>
      </div>

      <label>차량명 검색</label>
      <input id="carSearch" placeholder="예) 쏘렌토 / 셀토스">
      <div id="suggest"></div>

      <label>트림</label>
      <select id="trimSelect" disabled>
        <option>차량을 먼저 선택하세요</option>
      </select>

      <label>옵션</label>
      <div id="options"></div>

      <div class="prices">
        <div class="price">차량가<br><span id="base">0원</span></div>
        <div class="price">옵션가<br><span id="opt">0원</span></div>
        <div class="price">총 차량가<br><span id="total">0원</span></div>
      </div>
    </div>

    <!-- ================= 상담 조건 ================= -->
    <div class="section">
      <h2>상담 조건</h2>

      <label>차량 인도 지역</label>
      <input id="region" placeholder="예) 서울 / 경기 남부">

      <label>차량 필요 시기 (선택)</label>
      <input id="needTime" placeholder="예) 가능한 빨리 / 미정">
    </div>

    <!-- ================= 신청자 정보 ================= -->
    <div class="section">
      <h2>신청자 정보</h2>

      <label>이름</label>
      <input id="name">

      <label>연락처</label>
      <input id="phone">

      <label>카카오톡 ID (선택)</label>
      <input id="kakao">

      <label>
        <input type="checkbox" id="consent">
        개인정보 수집·이용 동의 (필수)
      </label>
      <small>견적 상담 목적 · 상담 완료 후 1년 보관</small>
    </div>

    <button id="submit">간단 견적 요청하기</button>
  </div>
</div>

<script>
const GAS_URL = "https://script.google.com/macros/s/AKfycbxE58tNJ_Nfr5KNFMp0b6P4dWyBGnP_CPDiTuontpL1u4b931Tx6EWn5iCR9CqjEzne/exec";

let catalog, selected={};

fetch(GAS_URL+"?action=catalog")
.then(r=>r.json())
.then(d=>catalog=d.catalog);

const search=document.getElementById("carSearch");
const suggest=document.getElementById("suggest");
const trimSelect=document.getElementById("trimSelect");
const optionsDiv=document.getElementById("options");

search.oninput=()=>{
  suggest.innerHTML="";
  if(!search.value) return suggest.style.display="none";
  suggest.style.display="block";

  Object.entries(catalog).forEach(([m,models])=>{
    Object.keys(models).forEach(model=>{
      if(model.includes(search.value)){
        const div=document.createElement("div");
        div.textContent=m+" "+model;
        div.onclick=()=>selectCar(m,model);
        suggest.appendChild(div);
      }
    });
  });
};

function selectCar(maker,model){
  selected={maker,model};
  search.value=model;
  suggest.style.display="none";
  trimSelect.innerHTML="";
  trimSelect.disabled=false;

  Object.keys(catalog[maker][model].trims).forEach(t=>{
    const o=document.createElement("option");
    o.value=t;o.textContent=t;
    trimSelect.appendChild(o);
  });
}

trimSelect.onchange=()=>{
  const t=trimSelect.value;
  optionsDiv.innerHTML="";
  const opts=catalog[selected.maker][selected.model].trims[t].options||{};
  Object.entries(opts).forEach(([n,p])=>{
    const l=document.createElement("label");
    l.className="option";
    l.innerHTML=`<input type="checkbox" data-p="${p}">${n} (+${p.toLocaleString()}원)`;
    optionsDiv.appendChild(l);
  });
};

document.getElementById("submit").onclick=()=>{
  if(!document.getElementById("consent").checked){
    alert("개인정보 수집 동의가 필요합니다");
    return;
  }
  alert("접수 완료 (실제 저장 로직 연결됨)");
};
</script>
</body>
</html>
